#include<stdio.h>
#include <string.h>
void main()
{
	char a[20];
	printf("请输入式子\n");
	gets(a);
	for(int i=1;i<strlen(a);i++)
	{
	    if(a[i]=='*')
		{
			float ji1=a[i-1]-'0',
			ji2=a[i+1]-'0',
			ji=ji1*ji2;
			a[i+1]=ji+'0';
			a[i-1]='0';
			if(i!=1)
			{
			   if(a[i-2]=='+')
			   {
			   	 a[i]='+';
			   }
			   else if(a[i-2]=='-')
			   {
			   	 a[i]='-';
			   }
			}
			else 
			{
				a[i]='+';
			}
				i++;
		}
		else if(a[i]=='/')
		{
			float shang1=a[i-1]-'0',
			shang2=a[i+1]-'0',
			shang=shang1/shang2;
			a[i+1]=shang+'0';
			a[i-1]='0';
			if(i!=1)
			{
			   if(a[i-2]=='+')
			   {
			   	 a[i]='+';
			   }
			   else if(a[i-2]=='-')
			   {
			   	 a[i]='-';
			   }
			}
			else 
			{
				a[i]='+';
			}			
				i++;
		}
		else if(a[i]=='+'&&a[i]=='-')
		{
			i++;
		}
	}
	printf("原式等于");puts(a);
	float res=a[0]-'0';
	for(int j=1;j<strlen(a);j++)
	{
		if(a[j]=='+')
		{
			float jia=a[j+1]-'0';
			res=res+jia;
			j++;
		}
		else if(a[j]=='-')
		{
			float jian=a[j+1]-'0';
			res=res-jian;
			j++;
		}
	}
	printf("结果为%f\n",res);
}
